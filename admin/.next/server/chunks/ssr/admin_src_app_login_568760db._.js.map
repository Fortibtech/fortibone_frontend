{"version":3,"sources":["turbopack:///[project]/admin/src/app/login/login.module.css [app-ssr] (css module)","../../../../../admin/src/app/login/page.tsx"],"sourcesContent":["__turbopack_context__.v({\n  \"button\": \"login-module__kdNUiG__button\",\n  \"container\": \"login-module__kdNUiG__container\",\n  \"error\": \"login-module__kdNUiG__error\",\n  \"footer\": \"login-module__kdNUiG__footer\",\n  \"form\": \"login-module__kdNUiG__form\",\n  \"input\": \"login-module__kdNUiG__input\",\n  \"inputGroup\": \"login-module__kdNUiG__inputGroup\",\n  \"label\": \"login-module__kdNUiG__label\",\n  \"loginBox\": \"login-module__kdNUiG__loginBox\",\n  \"logo\": \"login-module__kdNUiG__logo\",\n  \"subtitle\": \"login-module__kdNUiG__subtitle\",\n  \"title\": \"login-module__kdNUiG__title\",\n});\n","'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport styles from './login.module.css';\r\n\r\nexport default function LoginPage() {\r\n    const router = useRouter();\r\n    const [isLogin, setIsLogin] = useState(true); // Toggle state\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [firstName, setFirstName] = useState('');\r\n    const [lastName, setLastName] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setIsLoading(true);\r\n\r\n        const apiUrl = process.env.NEXT_PUBLIC_API_URL;\r\n        const endpoint = `${apiUrl}/auth/${isLogin ? 'login' : 'register'}`;\r\n\r\n        const payload = isLogin\r\n            ? { email, password }\r\n            : { email, password, firstName, lastName, profileType: 'PRO' };\r\n\r\n        try {\r\n            const response = await fetch(endpoint, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(payload),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let errorMessage = 'Erreur inconnue';\r\n                try {\r\n                    const data = await response.json();\r\n                    errorMessage = data.message || (isLogin ? 'Identifiants incorrects' : 'Erreur inscription');\r\n                } catch (e) {\r\n                    errorMessage = `Erreur serveur (${response.statusText || response.status})`;\r\n                }\r\n                throw new Error(errorMessage);\r\n            }\r\n\r\n            const data = await response.json();\r\n\r\n            // Store token\r\n            localStorage.setItem('access_token', data.access_token);\r\n            localStorage.setItem('user', JSON.stringify(data.user)); // Required for layout auth check\r\n\r\n            // Redirect to dashboard\r\n            router.push('/dashboard');\r\n        } catch (err: any) {\r\n            setError(err.message || 'Erreur de connexion');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <div className={styles.loginBox}>\r\n                <div className={styles.logo}>K</div>\r\n                <h1 className={styles.title}>KomoraLink Admin</h1>\r\n                <p className={styles.subtitle}>\r\n                    {isLogin ? 'Connectez-vous pour accéder au dashboard' : 'Créer un compte Administrateur'}\r\n                </p>\r\n\r\n                {error && (\r\n                    <div className={styles.error}>\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                <form onSubmit={handleSubmit} className={styles.form}>\r\n                    {!isLogin && (\r\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '10px' }}>\r\n                            <div className={styles.inputGroup}>\r\n                                <label className={styles.label}>Prénom</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={firstName}\r\n                                    onChange={(e) => setFirstName(e.target.value)}\r\n                                    className={styles.input}\r\n                                    placeholder=\"Admin\"\r\n                                    required={!isLogin}\r\n                                />\r\n                            </div>\r\n                            <div className={styles.inputGroup}>\r\n                                <label className={styles.label}>Nom</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={lastName}\r\n                                    onChange={(e) => setLastName(e.target.value)}\r\n                                    className={styles.input}\r\n                                    placeholder=\"Komora\"\r\n                                    required={!isLogin}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className={styles.inputGroup}>\r\n                        <label className={styles.label}>Email</label>\r\n                        <input\r\n                            type=\"email\"\r\n                            value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                            className={styles.input}\r\n                            placeholder=\"admin@komoralink.com\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className={styles.inputGroup}>\r\n                        <label className={styles.label}>Mot de passe</label>\r\n                        <input\r\n                            type=\"password\"\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            className={styles.input}\r\n                            placeholder=\"••••••••\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        className={styles.button}\r\n                        disabled={isLoading}\r\n                        style={{\r\n                            background: isLogin ? '#0f172a' : '#00c9a7' // Different color for register\r\n                        }}\r\n                    >\r\n                        {isLoading ? 'Chargement...' : (isLogin ? 'Se connecter' : 'Créer le compte')}\r\n                    </button>\r\n                </form>\r\n\r\n                {/* \r\n                <div style={{ marginTop: '20px', textAlign: 'center' }}>\r\n                    <button\r\n                        onClick={() => setIsLogin(!isLogin)}\r\n                        style={{\r\n                            background: 'none',\r\n                            border: 'none',\r\n                            color: '#64748b',\r\n                            textDecoration: 'underline',\r\n                            cursor: 'pointer',\r\n                            fontSize: '14px'\r\n                        }}\r\n                    >\r\n                        {isLogin ? 'Pas de compte ? Créer un accès Admin' : 'Déjà un compte ? Se connecter'}\r\n                    </button>\r\n                </div>\r\n                */}\r\n\r\n                <p className={styles.footer}>\r\n                    © 2026 KomoraLink - FORTIBTECH\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}